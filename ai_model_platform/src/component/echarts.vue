<template>
    <div class="echart_container">
        <div ref="myloss" id="myChart">

        </div>
        <div ref="accuracy" id="myChart">

        </div>
        <div ref="recall" id="myChart">

        </div>
    </div>
</template>
<script setup>
import { onMounted, ref, inject } from "vue";
//通过inject使用echarts
const echarts = inject("echarts");
const myloss = ref();
const accuracy = ref();
const recall = ref();
function draw_echart(){
    let loss1 = echarts.init(myloss.value)
    let accuracy1 = echarts.init(accuracy.value)
    let recall1 = echarts.init(recall.value)
    let lossData = [1.5882026172983832, 1.506876547287048, 1.5226742729426608, 1.5726507205661335, 1.5408526469822459, 1.3854795403496136, 1.4687165420884005, 1.400512947665923, 1.389788552359817, 1.4023481069151005, 1.3758890472449126, 1.4282692309037044, 1.3804761286815919, 1.3353766801175706, 1.3383547777988873, 1.3197140193990162, 1.3646029435568703, 1.2665097635793867, 1.2792897487189088, 1.2078002635399643, 1.1097242465820336, 1.2569233540144422, 1.2543329210540863, 1.160871546959476, 1.2983362160478653, 1.0989988879872334, 1.160873784450931, 1.1360953529532538, 1.2089621930411552, 1.1926598576869336, 1.1138079773454517, 1.1118374189094016, 1.035408692416474, 0.9676268432554703, 1.036139746069046, 1.0482214888592392, 1.0887872613091134, 1.0742604065806345, 0.9816437601397033, 0.972763650350021, 0.92231982649412, 0.8906152647572129, 0.8631713389535979, 1.0328923051151246, 0.8967396131346395, 0.8871871940103497, 0.8333198279570996, 0.9217028006198782, 0.789002077319072, 0.8459286425549581, 0.7986610153746596, 0.8496481551959933, 0.7916314602932735, 0.7450087948342834, 0.789499979492158, 0.7991943713042986, 0.767972325765623, 0.7666387464021406, 0.7066677336997902, 0.7071154669531683, 0.6784981897324145, 0.6810122409128718, 0.645201271756363, 0.5864131426106888, 0.6684672667086472, 0.6263755996542333, 0.551823415985031, 0.6433411329783087, 0.5617057888515449, 0.5965366637292008, 0.6172626089169575, 0.5741259132146381, 0.6115154887726195, 0.4796728503964587, 0.5483999103417057, 0.48091101060449937, 0.4584803445611078, 0.4599464056506679, 0.46017994915120697, 0.4654345297377498, 0.39123745745578153, 0.48140496071134564, 0.4465154452188462, 0.3332888257871489, 0.47138230665947695, 0.4786328426399128, 0.42964604926505306, 0.3485795157851399, 0.2909068133689172, 0.3840357176596881, 0.29802297083315915, 0.3661727585696264, 0.3023329408230347, 0.32761983061206423, 0.28347488551528555, 0.2878539109348498, 0.2399189404299803, 0.31555615095791795, 0.21947691776649406, 0.22009946817223508]
    let accuracyData = [0.5188315069705626, 0.49106786393403007, 0.4963860591060517, 0.5233303307179438, 0.5064505841306766, 0.5421634845837656, 0.5231365374651298, 0.5243436337037742, 0.5555930566284403, 0.5557142388234352, 0.5641301350588112, 0.5590604465827539, 0.5459331976949076, 0.5781915586218994, 0.5609563299268499, 0.576206382139782, 0.5821997924050102, 0.5757226263418189, 0.5879589755216426, 0.5955857030793017, 0.5946733462206473, 0.5844605375487035, 0.6029823817420605, 0.6178093135123248, 0.6021452304935955, 0.612140018233087, 0.6138302826646018, 0.6412199100120661, 0.6339956748428516, 0.6358928001805929, 0.6286644756191831, 0.646301582822009, 0.6387112188479718, 0.6503183055827435, 0.6481869937616658, 0.665855242040374, 0.669402271802513, 0.6660988306260383, 0.6766873398538892, 0.6663421121854222, 0.6669056058911258, 0.6907575533762816, 0.6925758258628162, 0.7018048598234665, 0.7238314477486394, 0.7139902494153587, 0.6999626868364676, 0.7248065265173221, 0.705022744076703, 0.7181114266791255, 0.726590311219481, 0.7489516090346755, 0.7289160881431519, 0.7326447055225008, 0.7444700202102912, 0.7433652171363789, 0.7658118137665196, 0.7482915940072749, 0.7521616771122527, 0.7638036177343739, 0.7677469482203496, 0.7965680478108972, 0.7913123898874393, 0.7872391487774882, 0.7786547357207892, 0.8038981752185609, 0.7899978465261044, 0.7890977435776784, 0.820971207014432, 0.8168057897556121, 0.8273904064196264, 0.8259145492567029, 0.8358410333917542, 0.8253079258851803, 0.8260212079457918, 0.8477250360919071, 0.8374204488128071, 0.843104502222498, 0.8499901295102811, 0.8592657006811597, 0.8600964245238288, 0.854432305247638, 0.8662910886989438, 0.855038695750483, 0.8880704963284537, 0.8703430598075689, 0.8798652575148064, 0.8959761962471553, 0.8926043700360867, 0.9199756004995219, 0.8961623399936746, 0.9163068723298554, 0.9177889899995433, 0.9110463377498608, 0.9325054938780448, 0.9301027185059594, 0.944081541875773, 0.9491441324487282, 0.9670869049473524, 0.9633652794943639]
    let recallData = [0.3963081816205756, 0.4026567132747458, 0.4210976060598813, 0.42170415245874115, 0.42660333546299617, 0.4090829648094169, 0.4300597690590409, 0.4279732262614785, 0.4432032863944728, 0.4444730415581159, 0.4596068395859764, 0.4587277377074686, 0.46846934022715037, 0.46099237468920623, 0.4612626081478882, 0.4716570788255503, 0.48063787666946645, 0.4896501032141367, 0.5135021804159995, 0.4955370244429896, 0.49145065100517327, 0.5026007883036122, 0.5064751513646503, 0.5209764308993508, 0.505804151067675, 0.5268952462046297, 0.5328781966927851, 0.5386854467256391, 0.5354409807244879, 0.5440854291672865, 0.5372745424253262, 0.5516324577320346, 0.5561875468559945, 0.5708271671292809, 0.5601553473989526, 0.5845796577847767, 0.5967630272630955, 0.5661688366185516, 0.596181779226973, 0.6037387773199995, 0.5956458317646798, 0.6030979889274192, 0.6107924063453426, 0.6141938083777, 0.619132092531751, 0.6105126892094276, 0.6438465479710636, 0.6481699232941056, 0.6342905998322004, 0.6328105041967224, 0.6577359012897801, 0.651817877877627, 0.6640457942594705, 0.6644834835053167, 0.6796426602379747, 0.6847252692143379, 0.6755723090436471, 0.6740451483248374, 0.6770999089559422, 0.7040835917708701, 0.6911417104524629, 0.7030126445378212, 0.7071681727468081, 0.7176561452191228, 0.7038695251738581, 0.7301706142507666, 0.7385722435716755, 0.739268059254285, 0.7403254817173588, 0.7494588501475363, 0.7575258169917549, 0.7308599310215922, 0.7831954867188706, 0.772587801913748, 0.7672132879135036, 0.7748783450360028, 0.7887758016118758, 0.7877278494985454, 0.773632549261579, 0.8196348276034923, 0.8029349974680794, 0.819292636208067, 0.8072209156635703, 0.8345556897343772, 0.827105861131347, 0.8353813676376839, 0.8238909006819648, 0.8515053922907665, 0.8513426260897924, 0.8625134117905995, 0.8482645789490388, 0.8547856884113518, 0.887685631623304, 0.8590968114697543, 0.8733879777406917, 0.8911668934240068, 0.8858257345256334, 0.8957285266965229, 0.8909550046568662, 0.9037005588784752]
    let option = {
        xAxis: {
            type: "category",
            name: "次数"
        },
        yAxis: {
            type: "value",
            name: "loss"
        },
        series: [
            {
                data: lossData,
                type: "line"
            }
        ]
    };
    let option1 = {
        xAxis: {
            type: "category",
            name: "次数"
        },
        yAxis: {
            type: "value",
            name: "准确度"
        },
        series: [
            {
                data: accuracyData,
                type: "line"
            }
        ]
    };
    let option2 = {
        xAxis: {
            type: "category",
            name: "次数"
        },
        yAxis: {
            type: "value",
            name: "召回率"
        },
        series: [
            {
                data: recallData,
                type: "line"
            }
        ]
    };
    loss1.setOption(option);
    accuracy1.setOption(option1);
    recall1.setOption(option2);
}
onMounted(() => {

    // echarts
    let sleep2 = (time) => new Promise((resolve) => {
        setTimeout(resolve, time)
    })
    sleep2(15000).then(draw_echart);
    
});

</script>
<style>
.echart_container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#myChart {
    width: 90%;
    height: 33.3%;
    /* border: 1px solid black; */
}
</style>